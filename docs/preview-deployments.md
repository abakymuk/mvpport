# Preview Deployments

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ preview deployments –¥–ª—è Pull Requests.

## –û–±–∑–æ—Ä

–ö–∞–∂–¥—ã–π Pull Request –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç preview deployment –Ω–∞ Vercel, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ
- –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä–∞–º
- –£—Å–∫–æ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å code review
- –û–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –¥–æ merge –≤ main

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ Preview

1. **–°–æ–∑–¥–∞–Ω–∏–µ PR** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ Vercel deployment
2. **–ù–æ–≤—ã–µ –∫–æ–º–º–∏—Ç—ã** ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ preview
3. **Smoke —Ç–µ—Å—Ç—ã** ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
4. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ PR** ‚Üí —Å—Å—ã–ª–∫–∞ –Ω–∞ preview URL

### Preview URL

–§–æ—Ä–º–∞—Ç URL: `https://mvpport-git-{branch}-abakymuk.vercel.app`

–ü—Ä–∏–º–µ—Ä—ã:

- `https://mvpport-git-feature-auth-abakymuk.vercel.app`
- `https://mvpport-git-fix-bug-123-abakymuk.vercel.app`

## –ü–æ–ª—É—á–µ–Ω–∏–µ Preview

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. –°–æ–∑–¥–∞–π—Ç–µ Pull Request
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è CI/CD pipeline
3. –ù–∞–π–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å preview URL –≤ PR
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–ª—è —Ä–µ–≤—å—é–µ—Ä–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é "üöÄ Preview Deployment"
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ preview URL
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

## Smoke Tests

–ö–∞–∂–¥—ã–π preview –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç smoke —Ç–µ—Å—Ç—ã:

### –ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ endpoints

- **Health Check**: `GET /api/health`
  - –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç: `{"status":"ok","version":"0.1.0"}`
- **Main Page**: `GET /`
  - –û–∂–∏–¥–∞–µ–º—ã–π —Å—Ç–∞—Ç—É—Å: `200`

### –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤

- ‚úÖ **Passed** - –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ
- ‚ùå **Failed** - –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Preview Environment

Preview deployments –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
DATABASE_URL="postgresql://..."
NEXT_PUBLIC_SUPABASE_URL="https://..."
NEXT_PUBLIC_SUPABASE_ANON_KEY="..."

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
NODE_ENV="production"
VERCEL_ENV="preview"
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

1. **Vercel Dashboard**:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Project Settings ‚Üí Environment Variables
   - –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Preview environment

2. **GitHub Secrets** (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞):
   - –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ workflow

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### Vercel Dashboard

- **Deployments**: [Vercel Dashboard](https://vercel.com/dashboard)
- **Logs**: –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ deployment
- **Analytics**: –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### GitHub Actions

- **Smoke Tests**: [Actions Tab](https://github.com/abakymuk/mvpport/actions)
- **Logs**: –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- **Status**: —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ PR

## Troubleshooting

### Preview –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

- –û—à–∏–±–∫–∏ –≤ build –ø—Ä–æ—Ü–µ—Å—Å–µ
- –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Vercel (rate limits)

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Dashboard
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å GitHub Actions

### Smoke —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å
- –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ preview URL –≤—Ä—É—á–Ω—É—é
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ health endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### Preview –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

- Deployment –µ—â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω
- –ü—Ä–æ–±–ª–µ–º—ã —Å DNS
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Vercel

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è deployment
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤ Vercel Dashboard
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### Vercel Limits

- **Preview deployments**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø–ª–∞–Ω–æ–º Vercel
- **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö preview
- **–†–∞–∑–º–µ—Ä**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ PR –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ó–∞–∫—Ä—ã–≤–∞–π—Ç–µ PR –ø–æ—Å–ª–µ merge –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ draft PR –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD

### Workflow

```yaml
name: Preview Smoke Tests
on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  smoke:
    runs-on: ubuntu-latest
    steps:
      - name: Wait for Vercel deployment
        # –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è deployment

      - name: Test health endpoint
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoint

      - name: Comment PR
        # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è —Å URL
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –≤ PR
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤** –ø—Ä–∏ –Ω–æ–≤—ã—Ö –∫–æ–º–º–∏—Ç–∞—Ö
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ —Å—Ç–∞—Ç—É—Å–µ —Ç–µ—Å—Ç–æ–≤

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Preview Security

- **–ü—É–±–ª–∏—á–Ω—ã–µ URL**: preview –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ**: –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ—Ç production

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ production –¥–∞–Ω–Ω—ã–µ –≤ preview
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º

## –°—Å—ã–ª–∫–∏

- [Vercel Documentation](https://vercel.com/docs)
- [Vercel GitHub Integration](https://vercel.com/docs/concepts/git)
- [GitHub Actions](https://github.com/abakymuk/mvpport/actions)
- [Vercel Dashboard](https://vercel.com/dashboard)
