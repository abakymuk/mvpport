# [T-033] –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

**–¶–µ–ª—å:** –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç Owner/Admin –±—ã—Å—Ç—Ä–æ —Å–æ–±–∏—Ä–∞—Ç—å –∫–æ–º–∞–Ω–¥—É. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ RLS‚Äë–ø–æ–ª–∏—Ç–∏–∫–∏ –∏ —Å—Ç–∞—Ç—É—Å –∏–Ω–≤–∞–π—Ç–æ–≤ –∑–∞—â–∏—â–∞—é—Ç –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π.

## üéØ Scope (–≤—Ö–æ–¥–∏—Ç –≤ –∑–∞–¥–∞—á—É)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `invites` –≤ Supabase —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏: `PENDING | ACCEPTED | DECLINED | EXPIRED`
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### Backend

- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞, –æ—Ç–ø—Ä–∞–≤–∫–∞ email (—á–µ—Ä–µ–∑ Supabase SMTP/Mailhog –≤ dev)
- ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø—Ä–∏–Ω—è—Ç–∏—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ membership –ø–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è

### Frontend

- ‚úÖ UI: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/members` ‚Äî –º–æ–¥–∞–ª ¬´Invite member¬ª
- ‚úÖ –°–ø–∏—Å–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –∏–Ω–≤–∞–π—Ç–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é resend/revoke
- ‚úÖ –ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/invite` –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π

## ‚ùå Out of scope

- –î–æ–º–µ–Ω–Ω—ã–µ –ø–æ—á—Ç–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏ (SPF/DKIM/DMARC) –¥–ª—è prod
- –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–æ–ª–∏

## üìù –ó–∞–¥–∞—á–∏

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase)

- [x] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `invites` —Å RLS –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏
- [x] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 2. Backend API

- [x] `POST /api/invites` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- [x] `POST /api/invites/accept` - –ø—Ä–∏–Ω—è—Ç–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- [x] `GET /api/invites` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- [x] `DELETE /api/invites/[id]` - –æ—Ç–∑—ã–≤ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

### 3. Email —Å–∏—Å—Ç–µ–º–∞

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase SMTP/Mailhog –¥–ª—è dev
- [ ] –°–æ–∑–¥–∞—Ç—å email —à–∞–±–ª–æ–Ω –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π

### 4. Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- [x] –ú–æ–¥–∞–ª "Invite member" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/members`
- [x] –°–ø–∏—Å–æ–∫ pending invites —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏
- [x] –ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/invite` –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º UI

### 5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- [x] RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `invites`
- [ ] Rate limiting –¥–ª—è API
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

## ‚úÖ Acceptance Criteria

- [x] ADMIN+ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–Ω–≤–∞–π—Ç; –ø–æ–ª—É—á–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å (email –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)
- [x] –ü–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è ‚Äî –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ memberships —Å –Ω—É–∂–Ω–æ–π —Ä–æ–ª—å—é
- [x] –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç; revoke –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–∏–Ω—è—Ç–∏–µ
- [x] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ ADMIN+ –ø—Ä–∞–≤ –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/—á–∏—Ç–∞—Ç—å –∏–Ω–≤–∞–π—Ç—ã —ç—Ç–æ–π org

## ‚ö†Ô∏è Risks & Mitigations

### –ó–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å–µ–Ω–¥–æ–º

- **–†–∏—Å–∫:** –°–ø–∞–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è–º–∏
- **–†–µ—à–µ–Ω–∏–µ:** Rate limit –Ω–∞ endpoint —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π

### –£—Ç–µ—á–∫–∞ —Ç–æ–∫–µ–Ω–∞

- **–†–∏—Å–∫:** –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- **–†–µ—à–µ–Ω–∏–µ:** –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ/–∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏–µ —Ç–æ–∫–µ–Ω—ã + –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å revoke

## üìö Notes/Links

- –í –ø—Ä–æ–¥–µ: –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π SMTP –∏ –¥–æ–º–µ–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π —Ä–æ–ª–µ–π (T-032)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö RLS –ø–æ–ª–∏—Ç–∏–∫ (T-014)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (–∫—Ä–æ–º–µ email)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
